{% extends 'admin.html' %}
{%- block styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='form.css') }}">
{%- endblock styles %}
{% block content %}
<div id="editing" class="form">
  <form class="edit" method="POST">
    {{ team_form.csrf_token }}
    <h2>Joukkueen muokkaus</h2>
    {{ with_errors(team_form.name) }}
    {{ with_errors(team_form.series) }}
    <div class="members">
      <label>JÃ¤senet</label>
      <div>
        <div class="member-field">{{ with_errors(team_form.mem1) }}</div>
        <div class="member-field">{{ with_errors(team_form.mem2) }}</div>
        <div class="member-field">{{ with_errors(team_form.mem3) }}</div>
        <div class="member-field">{{ with_errors(team_form.mem4) }}</div>
        <div class="member-field">{{ with_errors(team_form.mem5) }}</div>
      </div>
    </div>
    <br />
    {{ with_errors(team_form.new_password) }}
    {{ with_errors(team_form.new_pw_again) }}
    <div class="delete">{{ team_form.delete.label }}{{ team_form.delete(Class='boolean') }}</div>
    <input type="submit" value="Tallenna" id="sbmt">
  </form>
</div>
<div class="checkpoints">
  <table class="checkpoints">
    <tr><th class="cps">Aika</th><th class="cps">Rasti</th></tr>
    {% for cp in cps %}
    <tr>
      <td class="cp-time"> <a href="{{ url_for('admin_cp', cp=cp['cp'] , team=cp['team'], time=cp['time']) }}">{{ cp['time'] }}</a></td><td class="cp-name">{{ cp['name'] }}</td>
    </tr>
    {% endfor %}
  </table>
  </div>
{% endblock content %}

{% macro with_errors(field) %}
<div class="form-field">
  {%- if field.errors %}
  {%- set css_class = 'has_error'%}
  {{ field.label }}{{ field(class=css_class, **kwargs) }}
  <ul class="errors">{% for error in field.errors %}<li>{{ error|e }}</li>{% endfor %}</ul>
  {%- else %}
  {{ field.label }}{{ field(class="inpt") }}
  {%- endif %}
</div>
{% endmacro %}